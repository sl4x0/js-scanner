const HOM_config={ignore:['skin-sam-overlay','skin-sam-widget','skin-sam-widget-stack','skin-sam-tabview'],groups:{'js/':{combine:!0,comboBase:'https://2hom.staticwars.com/combo/_',root:'/js/',base:'/js/',modules:{'hom-character-search':{path:'character-search.5d64adc9.js',requires:['cookie','event','transition','gallery-boxshadow-anim','anim-easing','hom-points']},'details-page':{path:'details-page.65fc7926.js',requires:['event','tabview','hom-points','main-page','hom-points-header','hom-reward-meter','hom-points-animator','details-page-css','hom-loader-details']},'hom-item-modal':{path:'item-modal.59100bda.js',requires:['base','overlay','anim','gallery-outside-events','gallery-overlay-extras','gallery-event-nav-keys','gallery-overlay-transition']},'hom-link-btn':{path:'link-btn.5c34039a.js',requires:['event-mouseenter','anim','transition']},'hom-loader-details':{path:'loader-details.1d30b28a.js',requires:['gallery-dispatcher']},'hom-loader-main':{path:'loader-main.92c16671.js',requires:['gallery-dispatcher','node','event-custom']},'hom-loader-monitor':{path:'loader-monitor.27a16db.js',requires:['gallery-dispatcher']},'main-page':{path:'main-page.f0763edf.js',requires:['event-custom','transition','anim','hom-item-modal','hom-points-header','hom-reward-meter','hom-points','hom-points-animator','hom-loader-main','main-page-css']},'hom-page-control':{path:'page-control.3da3e336.js',requires:['base','event-delegate','history-hash','hom-points']},'hom-points-animator':{path:'points-anim.b0f4ffd3.js',requires:['node','gallery-generic-anim']},'hom-points-header':{path:'points-header.4b047ff3.js',requires:['node','hom-points','hom-todo','hom-points-animator','hom-print-btn','hom-link-btn','hom-loader-monitor']},'hom-points':{path:'points.1dd99894.js',requires:['base','arena-base64']},'hom-print-btn':{path:'print-btn.6eebd4fa.js',requires:['event-mouseenter','transition']},'print-page':{path:'print-page.5a4e56fc.js',requires:['base','node','print-page-css','io-base','hom-character-search']},'hom-reward-meter-overlay':{path:'reward-meter-overlay.6dc173d8.js',requires:['node','event-mouseenter','overlay','gallery-overlay-transition']},'hom-reward-meter':{path:'reward-meter.899e9564.js',requires:['event','transition','hom-points','gallery-generic-anim','hom-todo','hom-reward-meter-overlay','hom-loader-monitor','reward-monitor-css','icons-css']},'hom-todo':{path:'todo.906ecd95.js',requires:['base','event-mouseenter','hom-points','oop','json','cookie']},'welcome-page':{path:'welcome-page.8694a321.js',requires:['event','node','hom-character-search','hom-page-control']}}},'js/gallery/':{combine:!0,comboBase:'https://2hom.staticwars.com/combo/_',root:'/js/gallery/',base:'/js/gallery/',modules:{'gallery-boxshadow-anim':{path:'boxshadow-anim.411441ac.js',requires:['anim-base']},'gallery-dispatcher':{path:'dispatcher.b6f8b33d.js',requires:['base','node-base','io-base','get','async-queue','classnamemanager']},'gallery-generic-anim':{path:'generic-anim.f946de23.js',requires:['base','base-build']},'gallery-overlay-extras':{path:'overlay-extras.8b77c590.js',supersedes:['gallery-overlay-modal'],requires:['overlay','plugin','event-resize','event-outside']}}},'js/lib/':{combine:!0,comboBase:'https://2hom.staticwars.com/combo/_',root:'/js/lib/',base:'/js/lib/',modules:{'arena-base64':{path:'Base64Codec.2e2f6a63.js',requires:[]}}},css:{combine:!0,comboBase:'https://2hom.staticwars.com/combo/_',root:'/css/',base:'/css/',modules:{'icons-css':{path:'icons.3bdf6a84.css',type:'css'},'main-page-css':{path:'main-page.1f3c1616.css',type:'css'},'details-page-css':{path:'details-page.69272956.css',type:'css'},'reward-monitor-css':{path:'reward-monitor.66eb93b.css',type:'css'},'print-page-css':{path:'print-page.32fc1a61.css',type:'css'}}}}}
YUI.add("hom-reward-meter",(function(t){"use strict";const e=t.Lang,a=t.namespace("hom"),o=a.points;function n(){t.on("click",this._shiftBar,"#more-rewards,#arrow-back,#arrow-ffwd",this),t.on("click",(function(t){a.todo.set("display",t.currentTarget.get("checked"))}),"#point-preview",this),t.on("domready",(function(){t.one("#point-preview").set("checked",a.todo.get("display"))})),t.on("character:updated",this.reset),a.points.after("totalChange",(function(t){this._updateBar(t),this._updateReward(t)}),this),a.todo.after(["change","displayChange"],this._updateBar,this),t.one(".rewards ol").on("transition:end",(function(){this._shifting=!1,this.fire("barShifted")}),this),this.on("barShifted",this._updatePointArrow,this),this.on("barUpdated",(function(){this._updatePointArrow(),this._updateArrows()}),this);const e={newVal:o.get("total")};this._updateReward(e),this._updateArrows(e),this._updateBar({type:"displayChange",newVal:a.todo.get("display")})}n._updateRewardLi=function(t,e){t.one("a").replaceClass("(icon[ml]|r\\d+[ab]?[ml])",e.css),t.one("h5").setContent(e.h5),t.one("p").setContent(e.p)},n.prototype={_shifting:!1,_anim:null,reset:function(){t.all(".meter ol li").removeClass("(todo-bg|active)")},_updateArrows:function(){const e=t.one(".rewards ol").hasClass("shifted"),a=o.get("total"),n=t.one("#arrow-back"),i=t.one("#arrow-ffwd"),r={opacity:1,duration:.1},s={opacity:0,duration:.1};function l(){this.removeClass("show-arrow")}function d(){this.addClass("show-arrow")}!e&&a>=30?(n.transition(s,l),i.transition(r,d)):e&&a<12?(n.transition(r,d),i.transition(s,l)):(i.transition(s,l),n.transition(s,l))},_updatePointArrow:function(){const e=t.one(".rewards ol"),n=e.all("li"),i=t.one("#arrow"),r=parseInt(i.getComputedStyle("width"),10),s=t.one(`#r_${o.get("total")}`)||n.item(0);let l=s?s.getX()-e.getX()+(parseInt(e.getComputedStyle("left"),10)||0):-1;const d=parseInt(e.get("parentNode").getComputedStyle("width"),10)||0,c=l<0||l>=d||!a.points.get("total")?0:1;s.hasClass("small")&&(l-=Math.round(parseInt(s.getComputedStyle("width"),10)/2)),l=Math.max(0,Math.min(d-r,l)),i.transition({left:`${l}px`,opacity:{duration:.15,value:c}})},_shiftBar:function(e){if(e.preventDefault(),this._shifting)return;this._shifting=!0;const a=t.one(".rewards ol"),o=e.currentTarget.hasClass("lower")||"arrow-back"===e.currentTarget.get("id"),n=o?0:-341,i=t.one("#more-rewards");a.replaceClass("shifted",o?"":"shifted"),this._updateArrows(),a.transition({left:`${n}px`}),i.transition({duration:.1,opacity:0},(function(){this.toggleClass("lower"),t.later(1,this,(function(){this.transition({duration:.1,opacity:1})}))}))},_updateReward(a){const o=a.newVal,i=HOM.rewards.regular[o-1],r=HOM.rewards.special,s=t.one("#current-reward"),l=s.one("ul");let d,c,p,h,u;if(c=l.all("li").item(0),e.isArray(i)){for(s.replaceClass("single","multiple"),d=t.one(document.createDocumentFragment()),h=0,u=i.length;h<u;h++)p=c.cloneNode(!0),p.one(".item").replaceClass("iconb[ml]?","iconb iconbm"),n._updateRewardLi(p,{css:`r${a.newVal}${"ab".charAt(h)}m iconm`,h5:i[h].name,p:i[h].desc}),d.append(p);l.setContent(d)}else s.replaceClass("multiple","single"),p=c.cloneNode(!0),p.one(".item").replaceClass("iconb[ml]?","iconb iconbl"),i?n._updateRewardLi(p,{css:`r${a.newVal}l iconl`,h5:i.name,p:i.desc}):o<50?n._updateRewardLi(p,{css:"r31l iconl",h5:r.partial.name,p:r.partial.desc}):n._updateRewardLi(p,{css:"r50l iconl",h5:r.max.name,p:r.max.desc}),l.setContent(p);c=p=null},_updateBar:function(n){const i=o.get("total"),r=a.todo.get("display"),s=r?a.Points.parseObject(a.todo.getComputedValues()).total:0,l=t.all(".meter ol li"),d=(r?l.filter(".active,.todo-bg"):l.filter(".active")).size();let c=this._anim;function p(){c&&e.isFunction(c.stop)&&c.stop()}const h=Math.max(i,s)-d;n.type&&("displayChange"===n.type&&!r||"totalChange"===n.type)&&(p(),l.removeClass("todo-bg")),h&&(p(),c=this._anim=new t.GenericAnim({steps:Math.abs(h),duration:.05*h,on:{step(t){const e=h<0?d-t:d+t-1,a=e+1,o=l.item(e);o&&(a<=i?o.replaceClass("todo-bg","active"):a>i&&a<=s?o.replaceClass("active","todo-bg"):o.removeClass("(todo-bg|active)"))},complete:t.bind((function(){this.fire("barUpdated")}),this)}}),c.run())}},t.augment(n,t.EventTarget),t.once("loader_monitor:ready",(function(){a.rewardMeter=new n}))}),"@VERSION@",{requires:["event","transition","hom-points","gallery-generic-anim","hom-todo","hom-reward-meter-overlay","hom-loader-monitor","reward-monitor-css","icons-css"]});